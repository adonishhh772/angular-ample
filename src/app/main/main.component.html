<div>
    <mat-drawer-container [ngStyle]="myStyles" class="menu-container" hasBackdrop=false>
        <mat-drawer #drawer class="side_menu" mode="side" opened>
            <div class="menu_header flex"><img src="../assets/myunistudy.png">
                <img class="logo_text" src="../assets/myunistudytext.png"></div>
            <mat-list id="drawerItem" class="side_menu_nav">
                <mat-list-item title="Dashboard" class="menu_item"
                               (click)="changeRoute($event,'','','Dashboard','dashboard','dashboard', null)">
                    <mat-icon matSuffix>dashboard</mat-icon>
                    <span class="menu_title">Dashboard</span></mat-list-item>
                <mat-accordion *ngIf="!hasShrunk && (!isClient)">
                    <mat-expansion-panel [expanded]="panelOpenState" title="All Contacts" class="menu_item_accordian"
                                         (opened)="panelOpenState = true"
                                         (closed)="panelOpenState = false">
                        <mat-expansion-panel-header class="menu_accordian_header">
                            <mat-panel-title class="menu_accordian_title">
                                <mat-icon matSuffix>people</mat-icon>
                                <span class="menu_title">All Contacts</span>
                            </mat-panel-title>
                            <mat-panel-description>
                                <span class="menu_badge contact_badge" matBadge="{{contactCount}}"
                                      matBadgeOverlap="false"></span>
                            </mat-panel-description>
                        </mat-expansion-panel-header>
                        <mat-list-item class="menu_item view_contacts"
                                       (click)="changeRoute($event,'All Contacts','people','View All','contacts/all','view_list', null)">
                            <mat-icon matSuffix>view_list</mat-icon>
                            <span class="menu_title">View All</span>
                            <div class="col-md-4"></div>
                        </mat-list-item>
                        <mat-list-item class="menu_item"
                                       (click)="changeRoute($event,'All Contacts','people','Add Contacts','contacts/add','add_circle', null)">
                            <mat-icon matSuffix>add_circle</mat-icon>
                            <span class="menu_title">Add Contacts</span></mat-list-item>
                    </mat-expansion-panel>
                </mat-accordion>
                <mat-accordion *ngIf="!hasShrunk && (!isClient)">
                    <mat-expansion-panel title="Leads Manager" class="menu_item_accordian"
                                         (opened)="panelOpenStateOther = true"
                                         (closed)="panelOpenStateOther = false">
                        <mat-expansion-panel-header class="menu_accordian_header">
                            <mat-panel-title class="menu_accordian_title">
                                <mat-icon matSuffix>groups</mat-icon>
                                <span class="menu_title">Leads Manager</span>
                            </mat-panel-title>
                        </mat-expansion-panel-header>
                        <mat-list-item class="menu_item view_leads"
                                       (click)="changeRoute($event,'Leads Manager','groups','Leads Dashboard','leads','dashboard', null)">
                            <mat-icon matSuffix>dashboard</mat-icon>
                            <span class="menu_title">Leads Dashboard</span>
                        </mat-list-item>
                        <mat-list-item class="menu_item track_leads"
                                       (click)="changeRoute($event,'Leads Manager','groups','Leads Tracker','leads/tracker','leaderboard', null)">
                            <mat-icon matSuffix>leaderboard</mat-icon>
                            <span class="menu_title">Leads Tracker</span></mat-list-item>
                        <mat-list-item class="menu_item add_leads"
                                       (click)="changeRoute($event,'Leads Manager','groups','Add Leads','leads/add','add_circle', null)">
                            <mat-icon matSuffix>add_circle</mat-icon>
                            <span class="menu_title">Add Leads</span>
                        </mat-list-item>
                        <mat-list-item class="menu_item leads_category"
                                       (click)="changeRoute($event,'Leads Manager','groups','Category','leads/category','category', null)">
                            <mat-icon matSuffix>category</mat-icon>
                            <span class="menu_title">Category</span>
                        </mat-list-item>
                    </mat-expansion-panel>
                </mat-accordion>
                <mat-accordion *ngIf="!hasShrunk">
                    <mat-expansion-panel title="Application Manager" class="menu_item_accordian"
                                         (opened)="panelOpenStateOther = true"
                                         (closed)="panelOpenStateOther = false">
                        <mat-expansion-panel-header class="menu_accordian_header">
                            <mat-panel-title class="menu_accordian_title">
                                <mat-icon matSuffix>school</mat-icon>
                                <span class="menu_title">Application Manager</span>
                            </mat-panel-title>
                        </mat-expansion-panel-header>
                        <mat-list-item class="menu_item view_application"
                                       (click)="changeRoute($event,'Application Manager','school','Dashboard','application','dashboard', null)">
                            <mat-icon matSuffix>dashboard</mat-icon>
                            <span class="menu_title">Application Dashboard</span>
                        </mat-list-item>
                        <mat-accordion>
                            <mat-expansion-panel title="Application Tracker" [expanded]="panelOpenStateTracker" class="menu_item_accordian"
                                                 (opened)="panelOpenStateTracker = true"
                                                 (closed)="panelOpenStateTracker = false">
                                <mat-expansion-panel-header class="menu_accordian_header">
                                    <mat-panel-title class="menu_accordian_title">
                                        <mat-icon matSuffix>leaderboard</mat-icon>
                                        <span class="menu_title">Application Tracker</span>
                                    </mat-panel-title>
                                </mat-expansion-panel-header>
                                <mat-list-item *ngFor="let types of applicationTracker" class="menu_item list_{{types._id}}"
                                               (click)="changeRoute($event,'Application','school',types.title,'application/tracker','history_edu',types._id)">
                                    <mat-icon matSuffix>history_edu</mat-icon>
                                    <span class="menu_title">{{types.title}}</span></mat-list-item>
                            </mat-expansion-panel>
                        </mat-accordion>
                        <mat-list-item class="menu_item"
                                       (click)="changeRoute($event,'Application Manager','school','Types','application/types','merge_type',null)">
                            <mat-icon matSuffix>merge_type</mat-icon>
                            <span class="menu_title">Application Types</span></mat-list-item>
                        <mat-list-item class="menu_item add_application"
                                       (click)="changeRoute($event,'Application','school','Add Application','application/add','add_circle',null)">
                            <mat-icon matSuffix>add_circle</mat-icon>
                            <span class="menu_title">Add Application</span></mat-list-item>
                    </mat-expansion-panel>
                </mat-accordion>

                <mat-list-item *ngIf="hasShrunk" title="Application Manager" class="menu_item menu_lists"
                               (mouseover)="openLiBranch = false; openLiApplication = true;">
                    <mat-icon matSuffix>school</mat-icon>
                    <span class="menu_title"></span>
                    <ul class="tree-menu" *ngIf="hasShrunk && openLiApplication"
                        (mouseleave)="openLiApplication = false">
                        <li><a href="https://icondatcrm.com/condat/5/applications/dashboard"><i
                                class="fa fa-circle-o"></i>
                            Application Dashboard</a></li>
                        <li class="treeview" style="height: auto;">
                            <a href="#"><i class="fa fa-circle-o"></i> Application Tracker
                                <span class="pull-right-container">
                  <i class="fa fa-angle-left pull-right"></i>
                </span>
                            </a>
                        </li>
                        <li><a href="https://icondatcrm.com/condat/5/application-status"><i class="fa fa-circle-o"></i>
                            Application Types</a></li>

                        <li><a href="https://icondatcrm.com/condat/5/create-application"><i class="fa fa-circle-o"></i>
                            Add Application</a>
                        </li>
                        <li><a href="https://icondatcrm.com/condat/5/no-applications"><i class="fa fa-circle-o"></i> No
                            Application
                            Clients</a></li>
                        <li><a href="https://icondatcrm.com/condat/5/applications/search"><i class="fa fa-circle-o"></i>
                            Filter Application</a></li>

                    </ul>
                </mat-list-item>

                <mat-accordion *ngIf="!hasShrunk && (!isClient) && (!isManager) && (!isAgent)">
                    <mat-expansion-panel title="Branch Manager" class="menu_item_accordian"
                                         (opened)="panelOpenStateOther = true"
                                         (closed)="panelOpenStateOther = false">
                        <mat-expansion-panel-header class="menu_accordian_header">
                            <mat-panel-title class="menu_accordian_title">
                                <mat-icon matSuffix>account_tree</mat-icon>
                                <span class="menu_title">Branch Manager</span>
                            </mat-panel-title>
                            <mat-panel-description>
                                <span class="menu_badge branch_badge" matBadge="{{branchCount}}"
                                      matBadgeOverlap="false"></span>
                            </mat-panel-description>
                        </mat-expansion-panel-header>
                        <mat-list-item class="menu_item"
                                       (click)="changeRoute($event,'Branch Manager','account_tree','All Branches','branch/all','view_list', null)">
                            <mat-icon matSuffix>view_list</mat-icon>
                            <span class="menu_title">All Branch</span>
                            <div class="col-md-4"></div>
                        </mat-list-item>
                        <mat-list-item class="menu_item"
                                       (click)="changeRoute($event,'Branch Manager','account_tree','Add Branch','branch/add','add_circle', null)">
                            <mat-icon matSuffix>add_circle</mat-icon>
                            <span class="menu_title">Add Branch</span></mat-list-item>
                    </mat-expansion-panel>
                </mat-accordion>

                <mat-list-item *ngIf="!isClient" title="Task Manager" class="menu_item task_manager"
                               (click)="changeRoute($event,'','','Task Manager','tasks','task', null)">
                    <mat-icon matSuffix>task</mat-icon>
                    <span class="menu_title">Task Manager</span>
                    <span class="menu_badge task_badge" matBadge="{{tasksCount}}"
                          matBadgeOverlap="false"></span>
                </mat-list-item>
                <mat-list-item *ngIf="hasShrunk && (!isClient)" title="Branch Manager" class="menu_item menu_lists"
                               (mouseover)="openLiApplication= false; openLiBranch = true;">
                    <mat-icon matSuffix>account_tree</mat-icon>
                    <span class="menu_title"></span>
                    <ul class="tree-menu" *ngIf="hasShrunk && openLiBranch" (mouseleave)="openLiBranch = false">
                        <li><a href="https://icondatcrm.com/condat/5/applications/dashboard"><i
                                class="fa fa-circle-o"></i>
                            Application Dashboard</a></li>
                        <li class="treeview" style="height: auto;">
                            <a href="#"><i class="fa fa-circle-o"></i> Application Tracker
                                <span class="pull-right-container">
                  <i class="fa fa-angle-left pull-right"></i>
                </span>
                            </a>
                        </li>
                        <li><a href="https://icondatcrm.com/condat/5/application-status"><i class="fa fa-circle-o"></i>
                            Application Types</a></li>

                        <li><a href="https://icondatcrm.com/condat/5/create-application"><i class="fa fa-circle-o"></i>
                            Add Application</a>
                        </li>
                        <li><a href="https://icondatcrm.com/condat/5/no-applications"><i class="fa fa-circle-o"></i> No
                            Application
                            Clients</a></li>
                        <li><a href="https://icondatcrm.com/condat/5/applications/search"><i class="fa fa-circle-o"></i>
                            Filter Application</a></li>

                    </ul>
                </mat-list-item>

                <mat-accordion *ngIf="!hasShrunk && (!isClient)">
                    <mat-expansion-panel title="Institute" class="menu_item_accordian"
                                         (opened)="panelOpenStateOther = true"
                                         (closed)="panelOpenStateOther = false">
                        <mat-expansion-panel-header class="menu_accordian_header">
                            <mat-panel-title class="menu_accordian_title">
                                <mat-icon matSuffix>foundation</mat-icon>
                                <span class="menu_title">Institutes</span>
                            </mat-panel-title>
                            <mat-panel-description>
                                <span class="menu_badge institute_badge" matBadge="{{instituteCount}}"
                                      matBadgeOverlap="false"></span>
                            </mat-panel-description>
                        </mat-expansion-panel-header>
                        <mat-list-item class="menu_item"
                                       (click)="changeRoute($event,'Institutes','foundation','All Institutes','institute/all','view_list', null)">
                            <mat-icon matSuffix>view_list</mat-icon>
                            <span class="menu_title">Institute List</span>
                            <div class="col-md-4"></div>
                        </mat-list-item>
                        <mat-list-item class="menu_item"
                                       (click)="changeRoute($event,'Institutes','foundation','Add Institutes','institute/add','add_circle', null)">
                            <mat-icon matSuffix>add_circle</mat-icon>
                            <span class="menu_title">Add Institute</span></mat-list-item>
                    </mat-expansion-panel>
                </mat-accordion>

                <mat-accordion *ngIf="!hasShrunk && (!isClient) && (!isManager) && (!isAgent) ">
                    <mat-expansion-panel title="Agents" class="menu_item_accordian"
                                         (opened)="panelOpenStateOther = true"
                                         (closed)="panelOpenStateOther = false">
                        <mat-expansion-panel-header class="menu_accordian_header">
                            <mat-panel-title class="menu_accordian_title">
                                <mat-icon matSuffix>support_agent</mat-icon>
                                <span class="menu_title">Agents</span>
                            </mat-panel-title>
                            <mat-panel-description>
                                <span class="menu_badge agent_badge" matBadge="{{agentCount}}"
                                      matBadgeOverlap="false"></span>
                            </mat-panel-description>
                        </mat-expansion-panel-header>
                        <mat-list-item class="menu_item"
                                       (click)="changeRoute($event,'Agents','support_agent','Agent Dasnboard','agent','dashboard', null)">
                            <mat-icon matSuffix>dashboard</mat-icon>
                            <span class="menu_title">Agent Dashboard</span>
                        </mat-list-item>
                        <mat-list-item class="menu_item"
                                       (click)="changeRoute($event,'Agents','support_agent','All Agents','agent/all','view_list', null)">
                            <mat-icon matSuffix>view_list</mat-icon>
                            <span class="menu_title">All Agents</span>
                            <div class="col-md-4"></div>
                        </mat-list-item>
                        <mat-list-item class="menu_item"
                                       (click)="changeRoute($event,'Agents','support_agent','Add Agent','agent/add','add_circle', null)">
                            <mat-icon matSuffix>add_circle</mat-icon>
                            <span class="menu_title">Add Agent</span></mat-list-item>
                    </mat-expansion-panel>
                </mat-accordion>

            </mat-list>

        </mat-drawer>
        <mat-drawer-content class="drawer_content">
            <div class="menu-content">
                <div class="col-md-12 fixed">
                    <div class="menu_bar col-md-12 flex">
                        <button mat-icon-button matSuffix (click)="toggleNav(drawer)" class="no-border-btn menu_toggle">
                            <mat-icon>{{menuIcon}}</mat-icon>
                        </button>
                        <div class="breadcrum {{column}} flex">
                        <span *ngFor="let item of menu" class="breadcurm_text flex">
                            <mat-icon matSuffix>{{item.icon}}</mat-icon>
                            <p>{{item.text}}</p>
                        </span>
                        </div>

                        <div *ngIf="isMiddleResolution" class="search_bar col-md-4L {{hasClient}}">
                            <div class="search-wrapper {{active}}">
                                <div class="input-holder">
                                    <input type="text" [ngModel]="searchText" class="search-input" (ngModelChange)="searchClient($event)" placeholder="Type to search clients">
                                    <button mat-icon-button matSuffix class="search-icon no-border-btn mr-1"
                                            (click)="searchTrigger()">
                                        <mat-icon>search</mat-icon>
                                    </button>
                                </div>
                                <button mat-icon-button matSuffix class="close" (click)="closeSearch()">
                                    <mat-icon>close</mat-icon>
                                </button>
                            </div>

                            <div class="search_box col-md-12" *ngIf="showResult">
                                <div (click)="navigateToContact(data._id,'search')" class="components_container not_top search_item" mat-menu-item *ngFor="let data of searchContacts">
                                    <mat-icon class="search_item_icon">person</mat-icon>
                                    <span>{{data.name}}</span>
                                </div>
                            </div>
                        </div>

                        <div class="menu_bar_items col-md-4">
                            <button *ngIf="!isMiddleResolution" mat-icon-button matSuffix (click)="toggleSearchBar()"
                                    class="search-icon no-border-btn mr-1">
                                <mat-icon>search</mat-icon>
                            </button>
                            <button *ngIf="!isClient" mat-icon-button matSuffix matBadge="{{assignedClientCount}}"
                                    (click)="openAssignee()"
                                    #assigneeMenuTrigger="matMenuTrigger"
                                    [matMenuTriggerFor]="menu_assigned"
                                    class="no-border-btn mr-1">
                                <mat-icon>groups</mat-icon>
                            </button>
                            <button *ngIf="!isClient" mat-icon-button matSuffix matBadge="7" (click)="openMail()"
                                    [matMenuTriggerFor]="menu_notify"
                                    class="no-border-btn mr-1">
                                <mat-icon>format_list_bulleted</mat-icon>
                            </button>
                            <button *ngIf="!isClient" mat-icon-button matSuffix matBadge="7" (click)="openMail()"
                                    [matMenuTriggerFor]="menu_notify"
                                    class="no-border-btn mr-1">
                                <mat-icon class="appln_rotate">flight</mat-icon>
                            </button>
                            <button *ngIf="!isClient" mat-icon-button matSuffix matBadge="{{tasksCount}}"
                                    (click)="openMail()"
                                    [matMenuTriggerFor]="menu_notify"
                                    #taskMenuTrigger="matMenuTrigger"
                                    class="no-border-btn task_notify mr-1">
                                <mat-icon>event</mat-icon>
                            </button>
                            <button *ngIf="!isClient" mat-icon-button matSuffix matBadge="{{reminderCount}}"
                                    (click)="toggleBadgeVisibility()" [matMenuTriggerFor]="menu_reminder" #reminderMenuTrigger="matMenuTrigger"
                                    class="no-border-btn mr-1 reminder_notify">
                                <mat-icon class="icon-anim-pulse">notifications</mat-icon>
                            </button>
                            <button mat-icon-button (click)="toggleProfile()" class="no-border-btn marginl10 profile">
                                <img src="../../assets/avatar.png">
                            </button>
                            <div class="col-md-4 dropdown-menu-lg bg-info dropdown-menu dropdown-menu-right {{show}}">
                                <app-profile [profile]="profile" [errorMessage]="errorMessage"></app-profile>
                            </div>
                            <mat-menu #menu_notify="matMenu" class="p-10" xPosition="before">
                                <div class="col-md-12">
                                    <div class="matMenu_title">
                                        <h3>{{menuTile}}</h3>
                                    </div>
                                    <div class="matMenu_body">
                                        <div mat-menu-item *ngFor="let data of itemData">
                                            <mat-icon>task_alt</mat-icon>
                                            <span>{{data.title}}</span>
                                        </div>
                                        <!--<button mat-menu-item>Item 2</button>-->
                                    </div>
                                    <div class="matMenu_footer border_top" *ngIf="itemData.length > 0">
                                        <button mat-menu-item (click)="navigateToView('tasks')">View All</button>
                                    </div>
                                </div>

                            </mat-menu>
                            <mat-menu #menu_reminder="matMenu" class="p-10" xPosition="before">
                                <div class="col-md-12">
                                    <div class="matMenu_title">
                                        <h3>{{menuTile}}</h3>
                                    </div>
                                    <div class="matMenu_body">
                                        <div (click)="navigateToContact(data.client_id,'menu')" mat-menu-item *ngFor="let data of itemData">
                                            <mat-icon>notifications_active</mat-icon>
                                            <span>{{data.notes}}</span>
                                        </div>
                                        <!--<button mat-menu-item>Item 2</button>-->
                                    </div>
                                    <div class="matMenu_footer border_top" *ngIf="itemData.length > 0">
                                        <button mat-menu-item (click)="navigateToView('client')">View All</button>
                                    </div>
                                </div>

                            </mat-menu>

                            <mat-menu #menu_assigned="matMenu" class="p-10" xPosition="before">
                                <div class="col-md-12">
                                    <div class="matMenu_title">
                                        <h3>{{menuTile}}</h3>
                                    </div>
                                    <div class="matMenu_body">
                                        <button (click)="navigateToContact(data.client_id,'menu')" mat-menu-item
                                                *ngFor="let data of itemData">
                                            <mat-icon>person</mat-icon>
                                            <span>{{data.client_name}}</span>
                                        </button>
                                        <!--<button mat-menu-item>Item 2</button>-->
                                    </div>
                                    <div class="matMenu_footer border_top" *ngIf="itemData.length > 0">
                                        <button mat-menu-item (click)="navigateToView('client')">View All</button>
                                    </div>
                                </div>

                            </mat-menu>
                        </div>
                        <div class="app_header_app_mobile {{openSearch}}">
                            <div class="search-wrapper active">
                                <div class="input-holder">
                                    <input type="text" class="search-input" placeholder="Type to search">
                                    <button mat-icon-button matSuffix class="search-icon no-border-btn"
                                            (click)="searchTrigger()">
                                        <mat-icon>search</mat-icon>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <mat-progress-bar *ngIf="started" mode="indeterminate"></mat-progress-bar>
                </div>
                <div class="container">
                    <router-outlet></router-outlet>
                </div>
            </div>
        </mat-drawer-content>
    </mat-drawer-container>
</div>


